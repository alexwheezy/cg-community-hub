---
title: Полезные экспрешны
order: 0
---

* **Переключение свича каждые N кадров**

  На практике часто встречается задача, в которой нужно заставить свич переключаться раз
  в несколько кадров. в дальнейшем в качестве значения N мы возьмём число 11,
  чтобы не смущать людей, слепо переписывающих экспрешн с N, и не понимающих, почему
  ничего не работает

  `floor($FF/11)`

  `floor($FF/N)`

  `floor(X)` возвращает наибольшее целое число, меньшее чем Х.
  для положительных Х это эквивалентно отбрасыванию дробной части: `2.345`->`2`,
  но для отрицательных чисел это не просто отбрасывание дробной части: `-2.345`->`-3`,
  т.к. `-3` - это наибольшее целое число, меньшее `-2.345`

  выражение выше будет переключаться каждые 11 кадров: с 0 по 10 - 0, с 11 по 21 - 1, 
  с 22 по 32 - 2 итп

  если нам надо зациклить это, например, чтобы результат выражения поднимался от 0 до 5, 
  и затем опять начинался с нуля:

  `floor($FF/11)%6`

  `floor($FF/N)%M`

  `%` - это оператор fmod

  Подобный вариант подходит для случая, когда надо циклично переключать входы switch ноды 
  раз в N кадров. в таком случае в более полезной форме это можно записать так:  
  `floor($FF/11)%opninputs(".")`

  здесь `opninputs(".")` вернёт число воткнутых нод в текущий свич

* **Активация на 1 кадр каждые N кадров**

  `floor($FF)%11==1`

  `floor($FF)%N==1`

  `%` - это оператор fmod  
  `floor(X)` - см выше.

  `1` в `==1` может быть заменено на любое число от `0` до `N-1` включительно.
  для примера взята именно 1 только потому, чтобы это выражение возвращало 1 в первом кадре.

  В итоге выражение будет равно 1 в кадрах 1 12 23 34 итд

* **Активация на M кадров каждые N кадров**

  `floor($FF)%11<6`

  `floor($FF)%N<M`

  данное выражение будет равно 1 первые 6 кадров из каждого блока по 17 кадров.
  например в кадрах 0 1 2 3 4 5  11 12 13 14 15 16  22 23 24 25 26 27
  
